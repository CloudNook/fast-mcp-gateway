# MCP Gateway 项目待办清单

## 项目概述
实现一个基于Java Spring Boot的MCP Gateway，专门用于stdio到SSE的协议转换，让LangChain4j等客户端可以通过SSE接口使用stdio类型的MCP Server。

## 功能模块清单

### 1. 项目基础架构搭建
**状态**: 待完成
**描述**: 添加Spring Boot WebFlux依赖和基础配置
- [ ] 更新pom.xml，添加Spring Boot WebFlux依赖
- [ ] 创建Spring Boot主应用类
- [ ] 配置application.yml基础配置
- [ ] 创建基础包结构

### 2. MCP Server注册中心
**状态**: 待完成
**描述**: 实现MCP Server的注册和管理（简化版）
- [ ] 设计MCP Server信息数据模型（包含命令行参数）
- [ ] 实现注册中心服务类
- [ ] 提供REST API用于Server注册/注销
- [ ] 实现进程管理功能

### 3. stdio到SSE转换层
**状态**: 待完成
**描述**: 处理stdio输入输出并转换为SSE格式
- [ ] 实现stdio进程管理
- [ ] 处理stdin/stdout流
- [ ] 将stdio输出转换为SSE事件
- [ ] 将SSE输入转换为stdio输入

### 4. SSE接口端点
**状态**: 待完成
**描述**: 提供Server-Sent Events接口供客户端连接
- [ ] 实现SSE连接端点控制器
- [ ] 处理客户端连接和断开事件
- [ ] 实现消息推送机制
- [ ] 支持多客户端并发连接

### 5. MCP协议通信层
**状态**: 待完成
**描述**: 处理JSON-RPC 2.0协议消息
- [ ] 实现JSON-RPC 2.0协议解析器
- [ ] 创建消息封装和序列化工具
- [ ] 实现消息透传（不处理业务逻辑）
- [ ] 处理协议错误和异常

### 6. 连接管理和健康检查
**状态**: 待完成
**描述**: 监控MCP Server连接状态
- [ ] 实现stdio进程管理
- [ ] 定期健康检查机制
- [ ] 自动故障检测和恢复
- [ ] 连接状态监控

### 7. 配置管理
**状态**: 待完成
**描述**: 支持YAML配置文件配置MCP Server
- [ ] 创建配置文件结构
- [ ] 实现配置读取和管理
- [ ] 支持动态配置更新
- [ ] 配置验证机制

### 8. 日志记录和监控
**状态**: 待完成
**描述**: 记录请求日志和性能指标
- [ ] 实现请求日志记录
- [ ] 添加性能监控指标
- [ ] 实现日志格式化和输出
- [ ] 监控数据收集

### 9. 单元测试和集成测试
**状态**: 待完成
**描述**: 确保代码质量和系统稳定性
- [ ] 编写单元测试用例
- [ ] 实现集成测试
- [ ] 测试覆盖率检查
- [ ] 性能测试

## 技术栈
- **框架**: Spring Boot 3.x + WebFlux
- **协议**: JSON-RPC 2.0, SSE
- **构建工具**: Maven
- **文档**: Swagger/OpenAPI
- **测试**: JUnit, Mockito

## 项目结构
```
src/main/java/org/CloudNook/
├── config/          # 配置类
├── controller/      # 控制器
├── service/         # 服务层
├── model/           # 数据模型
├── repository/      # 数据访问层
├── util/            # 工具类
└── App.java         # 主应用类
```

## 进度跟踪
- **总任务数**: 9个主要模块
- **已完成**: 0个
- **进行中**: 0个
- **待完成**: 9个

## 核心特性
- **协议转换**: 将stdio协议转换为SSE协议
- **进程管理**: 管理MCP Server的子进程
- **消息透传**: 不解析JSON-RPC内容，直接透传消息
- **多客户端支持**: 支持多个客户端同时连接
- **健康检查**: 监控stdio进程状态

最后更新: 2025-09-30